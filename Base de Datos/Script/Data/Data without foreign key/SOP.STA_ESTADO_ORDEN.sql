--
-- Script was generated by Devart dbForge Studio for Oracle, Version 3.6.389.0
-- Product home page: http://www.devart.com/dbforge/oracle/studio
-- Script date 22/07/2016 02:26:48 p.m.
-- Server version: Oracle Database 10g Release 10.2.0.5.0 - 64bit Production With the Real Application Clusters option
-- Client version: 11.2.0.1
--


CONNECT SOP/AfP1374$fg@SERPOST;


-- 
-- Set default schema
--
ALTER SESSION SET CURRENT_SCHEMA = "SOP";

SET SQLBLANKLINES ON;
SET DEFINE OFF;
ALTER SESSION SET NLS_DATE_FORMAT = 'MM/DD/SYYYY HH24:MI:SS';
ALTER SESSION SET NLS_TIMESTAMP_TZ_FORMAT = 'MM/DD/SYYYY HH24:MI:SS.FF TZH:TZM';
ALTER SESSION SET NLS_TIMESTAMP_FORMAT = 'MM/DD/SYYYY HH24:MI:SS.FF';
ALTER SESSION SET NLS_NUMERIC_CHARACTERS = '.,';
ALTER SESSION SET NLS_NCHAR_CONV_EXCP = FALSE;
ALTER SESSION SET TIME_ZONE = '-05:00';

--
-- Definition for table STA_ESTADO_ORDEN
--
CREATE TABLE STA_ESTADO_ORDEN (
  NID_ESTADO NUMBER(5, 0) NOT NULL,
  CDESC_ESTADO VARCHAR2(60 BYTE) NOT NULL,
  CFLAG_ESTADO CHAR(1 BYTE) NOT NULL,
  CCOD_ESTADO CHAR(5 BYTE),
  CONSTRAINT PK_NID_ESTADO PRIMARY KEY (NID_ESTADO))
TABLESPACE SOP_DATA
STORAGE (
  INITIAL 64K
  NEXT 1M
  MAXEXTENTS UNLIMITED
)
LOGGING;

-- 
-- Dumping data for table STA_ESTADO_ORDEN
--
INSERT INTO STA_ESTADO_ORDEN VALUES
(6, 'CON EXPEDIENTE', '1', 'ES006');
INSERT INTO STA_ESTADO_ORDEN VALUES
(1, 'PENDIENTE DE REVISION', '1', 'ES001');
INSERT INTO STA_ESTADO_ORDEN VALUES
(2, 'PENDIENTE DE APROBACION', '1', 'ES002');
INSERT INTO STA_ESTADO_ORDEN VALUES
(3, 'PENDIENTE DE TRANSMISION', '1', 'ES003');
INSERT INTO STA_ESTADO_ORDEN VALUES
(4, 'TRANSMITIDO', '1', 'ES004');
INSERT INTO STA_ESTADO_ORDEN VALUES
(5, 'NUMERADO', '1', 'ES005');
INSERT INTO STA_ESTADO_ORDEN VALUES
(7, 'ANULADO POR SOLICITUD DEL CLIENTE', '1', 'ES007');
INSERT INTO STA_ESTADO_ORDEN VALUES
(10, 'ANULADO POR VENC. DE PLAZO', '1', 'ES008');
INSERT INTO STA_ESTADO_ORDEN VALUES
(11, 'ANULADO', '1', 'ES009');

--
-- Definition for trigger TR_STA_ID_ESTADO_ORDEN
--
CREATE OR REPLACE TRIGGER TR_STA_ID_ESTADO_ORDEN
BEFORE INSERT ON STA_ESTADO_ORDEN FOR EACH ROW
BEGIN

SELECT sop.SQ_STA_Estado_Orden.nextval
  INTO omwb_emulation.globalPkg.identity
  FROM dual;

 :new.NID_ESTADO :=omwb_emulation.globalPkg.identity;

END;
/

COMMIT;

-- 
-- Set default schema
--
DECLARE
  p VARCHAR2(255);
BEGIN 
  SELECT USER INTO p FROM DUAL;
  EXECUTE IMMEDIATE 'ALTER SESSION SET CURRENT_SCHEMA = ' || p;
END;
/